.text
.globl main
main:
_start:
	movl $3,%eax
	pushl %edx
	mov $heap,%edx
	movl %eax,0(%edx)
	popl %edx
	movl $7,%ebx
	pushl %edx
	mov $heap,%edx
	movl %ebx,4(%edx)
	popl %edx
	movl $5,%ecx
	pushl %edx
	mov $heap,%edx
	movl %ecx,8(%edx)
	popl %edx
	addl %ebx,%ecx
	pushl %edx
	mov $heap,%edx
	movl %ecx,12(%edx)
	popl %edx
	subl %eax,%ecx
	pushl %edx
	mov $heap,%edx
	movl %ecx,16(%edx)
	popl %edx
	pushl %ecx
	movl $1,%edx
	pushl $1
	call _print
	pushl %edx
	mov $heap,%edx
	popl %edx
	movl $5,%eax
	pushl %edx
	mov $heap,%edx
	movl %eax,8(%edx)
	popl %edx
	pushl %eax
	movl $1,%eax
	pushl $1
	call _print
	movl $5,%eax
	pushl %edx
	mov $heap,%edx
	movl %eax,8(%edx)
	popl %edx
	pushl %edx
	mov $heap,%edx
	popl %edx
	movl $4,%ebx
	pushl %edx
	mov $heap,%edx
	movl %ebx,20(%edx)
	popl %edx
	pushl %eax
	pushl %eax
	pushl %ebx
	popl %eax
	popl %edx
	mull %edx
	movl %eax,%ebx
	popl %eax
	pushl %edx
	mov $heap,%edx
	movl %ebx,24(%edx)
	popl %edx
	movl $7,%edx
	addl %ebx,%edx
	pushl %edx
	mov $heap,%edx
	movl %edx,28(%edx)
	popl %edx
	pushl %edx
	movl $1,%eax
	pushl $1
	call _print
	pushl %edx
	mov $heap,%edx
	movl 4(%edx),%eax
	popl %edx
	movl $6,%ebx
	pushl %edx
	mov $heap,%edx
	movl %ebx,32(%edx)
	popl %edx
	pushl %eax
	pushl %eax
	pushl %ebx
	popl %eax
	popl %edx
	mull %edx
	movl %eax,%ebx
	popl %eax
	pushl %edx
	mov $heap,%edx
	movl %ebx,12(%edx)
	popl %edx
	movl $3,%ecx
	pushl %edx
	mov $heap,%edx
	movl %ecx,36(%edx)
	popl %edx
	addl %ebx,%ecx
	pushl %edx
	mov $heap,%edx
	movl %ecx,0(%edx)
	popl %edx
	pushl %ecx
	movl $1,%edx
	pushl $1
	call _print
	pushl %edx
	mov $heap,%edx
	movl 8(%edx),%eax
	popl %edx
	pushl %eax
	movl $1,%ebx
	pushl $1
	call _print
	movl $1,%eax
	movl $0,%ebx
	int $0x80
	ret
_print:
	popl %ebx
	popl %eax
	popl %eax
	pushl %ebx
	mov $heap,%ecx
	addl $40,%ecx
	movl $1,%ebx
	cmpl $0,%eax
	jne label0u
	pushl %edx
	mov $heap,%edx
	movl $48,(%ecx)
	popl %edx
	addl $4,%ecx
	jmp label5u
label0u:
	cmpl $0,%eax
	jge label1u
	pushl %edx
	mov $heap,%edx
	movl $45,(%ecx)
	popl %edx
	addl $4,%ecx
	not %eax
	addl $1,%eax
label1u:
	cmpl %ebx,%eax
	jle label2u
	pushl %eax
	movl %ebx,%eax
	movl $10,%ebx
	mull %ebx
	movl %eax,%ebx
	popl %eax
	jmp label1u
label2u:
	cmpl %ebx,%eax
	jge label3u
	pushl %eax
	movl %ebx,%eax
	movl $10,%ebx
	movl $0,%edx
	divl %ebx
	movl %eax,%ebx
	popl %eax
label3u:
	cmpl $0,%eax
	je label4u
	pushl %edx
	movl $0,%edx
	divl %ebx
	addl $48,%eax
	movl %eax,(%ecx)
	movl %edx,%eax
	addl $4,%ecx
	popl %edx
	jmp label2u
label4u:
	cmpl $0,%ebx
	je label5u
	pushl %edx
	mov $heap,%edx
	movl $48,(%ecx)
	popl %edx
	addl $4,%ecx
label5u:
	movl $4,%eax
	movl $1,%ebx
	pushl %edx
	mov $heap,%edx
	movl $13,(%ecx)
	popl %edx
	addl $4,%ecx
	pushl %edx
	mov $heap,%edx
	movl $10,(%ecx)
	popl %edx
	addl $4,%ecx
	pushl %ecx
	mov $heap,%ecx
	addl $40,%ecx
	popl %edx
	subl %ecx,%edx
	int $0x80
	ret
.bss
	.lcomm heap,8192
